<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive DBMS Lab Manual (Weeks 1-9)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Chosen Palette: DevFocus (Slate grey, off-white, and muted teal) -->
    <!-- Application Structure Plan: A two-column SPA with a fixed sidebar for lab session navigation (1-9) and a dynamic main content area. This structure provides clear, persistent navigation. The content area uses searchable and filterable cards for each question/code pair to facilitate quick lookups. A 'copy code' feature is added for practical utility. This design prioritizes ease of access and usability over a linear document format. -->
    <!-- Visualization & Content Choices: The source report is code and text-based, so no charts are used. The primary goal is clear presentation and utility. Info: Lab Questions/Solutions -> Goal: Inform/Provide Solution -> Presentation: HTML card with formatted code block or text block -> Interaction: Click-to-copy button for code snippets -> Justification: Provides direct utility for a developer/student audience. Method: HTML/Tailwind/JS. Info: Lab Sections -> Goal: Organize -> Presentation: Sidebar Navigation Links -> Interaction: Click to filter content -> Justification: Intuitive navigation for a multi-part document. Method: JS content rendering. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        pre, code {
            font-family: 'Roboto Mono', monospace;
        }
        .sidebar-link {
            transition: all 0.2s ease-in-out;
        }
        .sidebar-link:hover, .sidebar-link.active {
            background-color: #4A5568; /* a shade of gray-700 */
            color: #FFFFFF;
            transform: translateX(4px);
        }
        .card {
            transition: all 0.3s ease-in-out;
            overflow: hidden;
        }
        .copy-btn-feedback {
            transition: background-color 0.3s ease;
        }
        .er-design-card ul {
            list-style-type: disc;
            padding-left: 20px;
        }
        .er-design-card li {
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">
    <div class="flex h-screen">
        <aside class="w-64 bg-slate-800 text-slate-100 p-4 flex-shrink-0 overflow-y-auto">
            <h1 class="text-2xl font-bold mb-6 border-b border-slate-600 pb-4">DBMS Lab Manual</h1>
            <nav id="sidebar-nav">
                <!-- Navigation links will be populated by JS -->
            </nav>
        </aside>

        <main class="flex-1 p-6 lg:p-8 overflow-y-auto">
            <div class="max-w-5xl mx-auto">
                <header class="mb-8">
                    <h2 id="main-title" class="text-3xl font-bold text-slate-900"></h2>
                    <p id="main-intro" class="mt-2 text-slate-600"></p>
                    <div class="mt-6 relative">
                        <input type="text" id="search-box" placeholder="Search questions or code..." class="w-full p-3 pl-10 rounded-lg border border-slate-300 focus:ring-2 focus:ring-teal-500 focus:outline-none">
                        <svg class="w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </div>
                </header>
                <div id="content-area">
                    <!-- Content will be populated by JS -->
                </div>
                 <div id="no-results" class="text-center py-10 text-slate-500 hidden">
                    <h3 class="text-xl font-semibold">No Results Found</h3>
                    <p>Try adjusting your search terms.</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        const dbmsLabData = [
            {
                id: 'lab1',
                title: 'Lab Session 01: Basic SQL Queries',
                intro: 'This section covers fundamental SQL queries for data definition and manipulation. You will practice creating tables, inserting data, and performing various retrieval operations using SELECT statements with different clauses.',
                sections: {
                    inLab: {
                        title: 'In Lab',
                        questions: [
                            { question: "List all the records of department table.", code: "SELECT * FROM DEPARTMENT;" },
                            { question: "List all department numbers, employee names and manager numbers of Employee table.", code: "SELECT DEPTNO, ENAME, MGR FROM EMPLOYEE;" },
                            { question: "Combine Empno, Ename and give an alias EMPREC to the expression.", code: "SELECT EMPNO || ' - ' || ENAME AS EMPREC FROM EMPLOYEE;" },
                            { question: "List all employees whose Name Starts with 'S'.", code: "SELECT * FROM EMPLOYEE WHERE ENAME LIKE 'S%';" },
                            { question: "List the employees whose names are starting with 'R' and ending with 'A'.", code: "SELECT * FROM EMPLOYEE WHERE ENAME LIKE 'R%A';" },
                            { question: "Display distinct values of deptno, job.", code: "SELECT DISTINCT DEPTNO, JOB FROM EMPLOYEE;" },
                            { question: "List all the employee records whose salary between 10000 & 30000.", code: "SELECT * FROM EMPLOYEE WHERE SAL BETWEEN 10000 AND 30000;" },
                            { question: "List all employees who have one of the three mgr numbers 7839, 7698 and 7782.", code: "SELECT * FROM EMPLOYEE WHERE MGR IN (7839, 7698, 7782);" },
                            { question: "List all the employees who have no manager.", code: "SELECT * FROM EMPLOYEE WHERE MGR IS NULL;" },
                            { question: "List the employee number, employee name and job of all clerks.", code: "SELECT EMPNO, ENAME, JOB FROM EMPLOYEE WHERE JOB = 'CLERK';" }
                        ]
                    },
                    postLab: {
                        title: 'Post Lab',
                        questions: [
                            { question: "Display the column headings ANNSAL for annual salary instead of sal*12 using column alias.", code: "SELECT ENAME, SAL * 12 AS ANNSAL FROM EMPLOYEE;" },
                            { question: "List all the employees whose names are having 'A' as second letter.", code: "SELECT * FROM EMPLOYEE WHERE ENAME LIKE '_A%';" },
                            { question: "Write a statement that uses NVL function to set null values to zero.", code: `SELECT ENAME, SAL, COMM, NVL(COMM, 0) AS "ADJUSTED COMMISSION" FROM EMPLOYEE;` },
                            { question: "List all the employees whose salary is not between a range 10000 & 20000.", code: "SELECT * FROM EMPLOYEE WHERE SAL NOT BETWEEN 10000 AND 20000;" },
                            { question: "List all Employees whose deptno not equal to 10 & 20.", code: "SELECT * FROM EMPLOYEE WHERE DEPTNO NOT IN (10, 20);" },
                            { question: "List all employee numbers whose name is exactly of 4 characters in length.", code: "SELECT EMPNO, ENAME FROM EMPLOYEE WHERE LENGTH(ENAME) = 4;" },
                            { question: "List all department names with dept no greater than 20.", code: "SELECT DNAME FROM DEPARTMENT WHERE DEPTNO > 20;" },
                            { question: "List all the employees who are working in department 20 and having designation Manager.", code: "SELECT * FROM EMPLOYEE WHERE DEPTNO = 20 AND JOB = 'MANAGER';" },
                            { question: "List all Mangers and with salary over 30000 and all salesmen.", code: "SELECT * FROM EMPLOYEE WHERE (JOB = 'MANAGER' AND SAL > 30000) OR (JOB = 'SALESMAN');" },
                            { question: "List all Managers and salesmen with salaries over 25000.", code: "SELECT * FROM EMPLOYEE WHERE JOB IN ('MANAGER', 'SALESMAN') AND SAL > 25000;" }
                        ]
                    }
                }
            },
            {
                id: 'lab2',
                title: 'Lab Session 02: SQL Functions',
                intro: 'This lab focuses on using built-in SQL functions to manipulate data. You will work with character, numeric, and date functions, as well as aggregate functions combined with GROUP BY and HAVING clauses.',
                sections: {
                    inLab: {
                        title: 'In Lab',
                        questions: [
                            { question: "Write an SQL statement to sort employee records by employee name.", code: "SELECT * FROM EMPLOYEE ORDER BY ENAME ASC;" },
                            { question: "List all deptnos and enames in Job Order.", code: "SELECT DEPTNO, ENAME, JOB FROM EMPLOYEE ORDER BY JOB;" },
                            { question: "Write an SQL statement using instr() function.", code: "SELECT ENAME, INSTR(ENAME, 'RA') FROM EMPLOYEE WHERE ENAME = 'PRAMOD';" },
                            { question: "Write an SQL statement using translate() and replace() functions.", code: `SELECT JOB, REPLACE(JOB, 'CLERK', 'ASSISTANT') FROM EMPLOYEE WHERE JOB = 'CLERK';\n\nSELECT ENAME, TRANSLATE(ENAME, 'AE', 'XY') FROM EMPLOYEE;` },
                            { question: "Write an SQL statement using Numeric functions.", code: "SELECT SAL, ABS(SAL), CEIL(SAL/1000), FLOOR(SAL/1000), POWER(SAL, 2) FROM EMPLOYEE WHERE ENAME = 'PRAMOD';" },
                            { question: "Write an SQL statement using to_char() function.", code: "SELECT ENAME, HIREDATE, TO_CHAR(HIREDATE, 'Day, DDth Month YYYY') AS \"Formatted Hire Date\" FROM EMPLOYEE;" },
                            { question: "Find the average, highest and lowest salary of employees.", code: `SELECT AVG(SAL) AS "Average Salary", MAX(SAL) AS "Maximum Salary", MIN(SAL) AS "Minimum Salary" FROM EMPLOYEE;` },
                            { question: "Display the average salary for all the departments employing more than 3 people.", code: "SELECT DEPTNO, AVG(SAL) FROM EMPLOYEE GROUP BY DEPTNO HAVING COUNT(*) > 3;" }
                        ]
                    },
                    postLab: {
                        title: 'Post Lab',
                        questions: [
                            { question: "Order the employee records by Sal column and Display the salaries in reverse order.", code: "SELECT ENAME, SAL FROM EMPLOYEE ORDER BY SAL DESC;" },
                            { question: "Write an SQL statement using substr() function.", code: `SELECT ENAME, SUBSTR(ENAME, 2, 3) AS "Substring" FROM EMPLOYEE;` },
                            { question: "Write an SQL statement using Date functions.", code: `SELECT ENAME, HIREDATE, SYSDATE, MONTHS_BETWEEN(SYSDATE, HIREDATE) AS "Months Worked" FROM EMPLOYEE;` },
                            { question: "Find 2 to the power of 10.", code: "SELECT POWER(2, 10) FROM DUAL;" },
                            { question: "Display only the year value from each employee's hire date.", code: "SELECT ENAME, HIREDATE, TO_CHAR(HIREDATE, 'YYYY') AS \"Hire Year\" FROM EMPLOYEE;" },
                            { question: "Count the Number of employees by each department.", code: `SELECT DEPTNO, COUNT(*) AS "Number of Employees" FROM EMPLOYEE GROUP BY DEPTNO;` },
                            { question: "Display only those jobs where the max salary is greater than or equal to 25000.", code: "SELECT JOB, MAX(SAL) FROM EMPLOYEE GROUP BY JOB HAVING MAX(SAL) >= 25000;" }
                        ]
                    }
                }
            },
            {
                id: 'lab3',
                title: 'Lab Session 03: Joins, Set Operations & Nested Queries',
                intro: 'Learn to combine data from multiple tables using various types of joins. This section also covers set operations (UNION, INTERSECT, MINUS) and the use of subqueries (nested queries) for complex data retrieval.',
                sections: {
                    inLab: {
                        title: 'In Lab',
                        questions: [
                            { question: "Display all employee names and their department names.", code: "SELECT E.ENAME, D.DNAME FROM EMPLOYEE E JOIN DEPARTMENT D ON E.DEPTNO = D.DEPTNO;" },
                            { question: "Display all employee names and their department names in department order.", code: "SELECT E.ENAME, D.DNAME FROM EMPLOYEE E, DEPARTMENT D WHERE E.DEPTNO = D.DEPTNO ORDER BY D.DNAME;" },
                            { question: "Find the department name of 'SATISH'.", code: "SELECT D.DNAME FROM EMPLOYEE E, DEPARTMENT D WHERE E.DEPTNO = D.DEPTNO AND E.ENAME = 'SATISH';" },
                            { question: "Display all department numbers in EMP and DEPT tables (eliminate duplicates).", code: "SELECT DEPTNO FROM EMPLOYEE UNION SELECT DEPTNO FROM DEPARTMENT;" },
                            { question: "Find common department numbers in EMP and DEPT tables.", code: "SELECT DEPTNO FROM EMPLOYEE INTERSECT SELECT DEPTNO FROM DEPARTMENT;" },
                            { question: "Find employees whose deptno is 20 but their salary is not greater than 25000.", code: "SELECT * FROM EMPLOYEE WHERE DEPTNO = 20 AND SAL <= 25000;" },
                            { question: "List all the employees who work in 'AMARAVATHI'.", code: "SELECT E.* FROM EMPLOYEE E JOIN DEPARTMENT D ON E.DEPTNO = D.DEPTNO WHERE D.LOC = 'AMARAVATHI';" },
                            { question: "Find the employees who earn the same salary as the minimum salary of each department.", code: "SELECT * FROM EMPLOYEE WHERE SAL IN (SELECT MIN(SAL) FROM EMPLOYEE GROUP BY DEPTNO);" },
                            { question: "Find the departments who are not in employee table.", code: "SELECT * FROM DEPARTMENT WHERE DEPTNO NOT IN (SELECT DISTINCT DEPTNO FROM EMPLOYEE WHERE DEPTNO IS NOT NULL);" },
                            { question: "Display employees who are not salesman and whose salary is less than that of any salesman.", code: "SELECT * FROM EMPLOYEE WHERE JOB != 'SALESMAN' AND SAL < ANY (SELECT SAL FROM EMPLOYEE WHERE JOB = 'SALESMAN');" }
                        ]
                    },
                    postLab: {
                        title: 'Post Lab',
                        questions: [
                            { question: "Find the employee name and manager name of each employee.", code: `SELECT e.ENAME AS "Employee Name", m.ENAME AS "Manager Name" FROM EMPLOYEE e LEFT JOIN EMPLOYEE m ON e.MGR = m.EMPNO;` },
                            { question: "Display all departments that have no employees.", code: "SELECT D.DEPTNO, D.DNAME FROM DEPARTMENT D LEFT JOIN EMPLOYEE E ON D.DEPTNO = E.DEPTNO WHERE E.EMPNO IS NULL;" },
                            { question: "Display all department numbers in EMP and DEPT tables (including duplicates).", code: "SELECT DEPTNO FROM EMPLOYEE UNION ALL SELECT DEPTNO FROM DEPARTMENT;" },
                            { question: "List employees with either same job as 'RAJA' or the salary greater than that of 'SANTHI'.", code: "SELECT * FROM EMPLOYEE WHERE JOB = (SELECT JOB FROM EMPLOYEE WHERE ENAME = 'RAJA') OR SAL > (SELECT SAL FROM EMPLOYEE WHERE ENAME = 'SANTHI');" },
                            { question: "Find the list of employees who work for 'PRAVEEN'.", code: "SELECT * FROM EMPLOYEE WHERE MGR = (SELECT EMPNO FROM EMPLOYEE WHERE ENAME = 'PRAVEEN');" },
                            { question: "Find the job with lowest average salary.", code: "SELECT JOB, AVG(SAL) FROM EMPLOYEE GROUP BY JOB HAVING AVG(SAL) = (SELECT MIN(AVG(SAL)) FROM EMPLOYEE GROUP BY JOB);" }
                        ]
                    }
                }
            },
            {
                id: 'lab4',
                title: 'Lab Session 04: ER Design',
                intro: 'This lab is a design exercise focusing on creating Entity-Relationship (ER) diagrams for given scenarios. The solutions below describe the entities, attributes, and relationships that would form the basis of the database schema.',
                sections: {
                    inLab: {
                        title: 'In Lab: U.S. House of Representatives Voting System',
                        questions: [
                            {
                                question: "Design an ER schema for keeping track of information about votes taken in the U.S. House of Representatives.",
                                type: 'er-design',
                                content: `
                                    <h5 class="font-semibold text-slate-700 mb-2">Entities:</h5>
                                    <ul>
                                        <li><b>STATE:</b> Represents a U.S. State. Attributes: <code>StateName</code> (PK), <code>Region</code>.</li>
                                        <li><b>CONGRESS_PERSON:</b> Represents a member of the house. Attributes: <code>PersonID</code> (PK), <code>Name</code>, <code>District</code>, <code>Start_date</code>, <code>Party</code>.</li>
                                        <li><b>BILL:</b> Represents a proposed law. Attributes: <code>BillID</code> (PK), <code>Bill_name</code>, <code>Date_of_vote</code>, <code>Passed_or_failed</code>.</li>
                                    </ul>
                                    <h5 class="font-semibold text-slate-700 mt-4 mb-2">Relationships:</h5>
                                    <ul>
                                        <li><b>Represents (STATE to CONGRESS_PERSON):</b> One-to-Many (1:M). A state is represented by many congresspersons. <code>StateName</code> is a foreign key in <code>CONGRESS_PERSON</code>.</li>
                                        <li><b>Sponsors (CONGRESS_PERSON and BILL):</b> Many-to-Many (M:N). Requires a junction table <code>SPONSORSHIP</code> (<code>PersonID</code>, <code>BillID</code>).</li>
                                        <li><b>Votes_On (CONGRESS_PERSON and BILL):</b> Many-to-Many (M:N). Requires a junction table <code>VOTE_RECORD</code> (<code>PersonID</code>, <code>BillID</code>) with an attribute <code>Vote</code>.</li>
                                    </ul>`
                            }
                        ]
                    },
                    postLab: {
                        title: 'Post Lab: MOVIE Database',
                        questions: [
                            {
                                question: "Design an Entity-Relationship diagram for the movie database.",
                                type: 'er-design',
                                content: `
                                    <h5 class="font-semibold text-slate-700 mb-2">Entities:</h5>
                                    <ul>
                                        <li><b>MOVIE:</b> Represents a film. Attributes: <code>MovieID</code> (PK), <code>Title</code>, <code>Year</code>, <code>Length</code>, <code>Plot_outline</code>.</li>
                                        <li><b>PERSON:</b> A superclass for actors and directors. Attributes: <code>PersonID</code> (PK), <code>Name</code>, <code>DOB</code>.</li>
                                        <li><b>PRODUCTION_COMPANY:</b> Represents a studio. Attributes: <code>CompanyID</code> (PK), <code>Name</code>, <code>Address</code>.</li>
                                        <li><b>GENRE:</b> Represents movie genres. Attributes: <code>GenreID</code> (PK), <code>GenreName</code>.</li>
                                        <li><b>QUOTE:</b> Represents a line from a movie. Attributes: <code>QuoteID</code> (PK), <code>QuoteText</code>.</li>
                                    </ul>
                                    <h5 class="font-semibold text-slate-700 mt-4 mb-2">Relationships:</h5>
                                    <ul>
                                        <li><b>Produces (PRODUCTION_COMPANY to MOVIE):</b> One-to-Many (1:M). <code>CompanyID</code> is a FK in <code>MOVIE</code>.</li>
                                        <li><b>Has_Genre (MOVIE and GENRE):</b> Many-to-Many (M:N). Requires a junction table <code>MOVIE_GENRE</code>.</li>
                                        <li><b>Directs (PERSON and MOVIE):</b> Many-to-Many (M:N). Requires a junction table <code>MOVIE_DIRECTOR</code>.</li>
                                        <li><b>Acts_In (PERSON and MOVIE):</b> Many-to-Many (M:N). Requires a junction table <code>ROLE</code> with attribute <code>RoleName</code>.</li>
                                        <li><b>Speaks (QUOTE to MOVIE and PERSON):</b> <code>MovieID</code> and <code>PersonID</code> are FKs in <code>QUOTE</code>.</li>
                                    </ul>`
                            }
                        ]
                    }
                }
            },
            {
                id: 'lab5',
                title: 'Lab Session 05: Oracle Objects',
                intro: 'This section deals with creating and managing various database objects beyond tables, such as Views, Indexes, and Synonyms. You will practice DDL commands like CREATE, ALTER, and DROP for these objects.',
                sections: {
                    inLab: {
                        title: 'In Lab',
                        questions: [
                            { question: "Create the table customer with the following data.", code: `CREATE TABLE customer (\n    custname VARCHAR2(20) PRIMARY KEY,\n    city     VARCHAR2(20),\n    state    VARCHAR2(20)\n);\n\nINSERT INTO customer (custname, city, state) VALUES ('RAVIKIRAN', 'HYDERABAD', 'TELANGANA');\nINSERT INTO customer (custname, city, state) VALUES ('NAVEEN', 'VIJAYAWADA', 'ANDHRA PRADESH');\n-- ... (and so on for all customers)\nCOMMIT;` },
                            { question: "Add a column phoneno number(10) to customer table.", code: "ALTER TABLE customer ADD phoneno NUMBER(10);" },
                            { question: "Change the size of the city to varchar(20).", code: "ALTER TABLE customer MODIFY city VARCHAR2(20);" },
                            { question: "Change the city of NAVEEN to GUNTUR.", code: "UPDATE customer SET city = 'GUNTUR' WHERE custname = 'NAVEEN';\nCOMMIT;" },
                            { question: "Update phoneno to '354678' for all customers.", code: "UPDATE customer SET phoneno = '354678';\nCOMMIT;" },
                            { question: "Create a view to include all employee information, but hide salary and commission.", code: "CREATE OR REPLACE VIEW V_EMP_DETAILS AS\nSELECT EMPNO, ENAME, JOB, MGR, HIREDATE, DEPTNO\nFROM EMPLOYEE;" },
                            { question: "Create an index to search employees faster based on their name.", code: "CREATE INDEX idx_emp_ename ON EMPLOYEE(ENAME);" },
                            { question: "Create a synonym for employee table.", code: "CREATE SYNONYM emp FOR EMPLOYEE;" },
                            { question: "Create a view to include department and average salary by department.", code: "CREATE OR REPLACE VIEW V_DEPT_AVG_SALARY AS\nSELECT d.DNAME, AVG(e.SAL) as AVERAGE_SALARY\nFROM DEPARTMENT d\nJOIN EMPLOYEE e ON d.DEPTNO = e.DEPTNO\nGROUP BY d.DNAME;" }
                        ]
                    },
                    postLab: {
                        title: 'Post Lab',
                        questions: [
                            { question: "Delete the customer of HYDERABAD city.", code: "DELETE FROM customer WHERE city = 'HYDERABAD';\nCOMMIT;" },
                            { question: "Drop the column state from the customer table.", code: "ALTER TABLE customer DROP COLUMN state;" },
                            { question: "Rename the customer table cust_info.", code: "RENAME customer TO cust_info;" },
                            { question: "Delete all the records of cust_info table.", code: "DELETE FROM cust_info;\n-- TRUNCATE TABLE cust_info; (Faster alternative)\nCOMMIT;" },
                            { question: "Drop the table cust_info.", code: "DROP TABLE cust_info;" },
                            { question: "Create a view that will display name, department number, and total income (Sal+Comm) of each employee in Department 10.", code: "CREATE OR REPLACE VIEW V_DEPT10_INCOME AS\nSELECT ENAME, DEPTNO, (SAL + NVL(COMM, 0)) AS TOTAL_INCOME\nFROM EMPLOYEE\nWHERE DEPTNO = 10;" }
                        ]
                    }
                }
            },
            {
                id: 'lab6',
                title: 'Lab Session 06: PL/SQL Control Structures',
                intro: 'This section covers fundamental PL/SQL control structures. You will find examples for conditional logic using IF/ELSE, various loop types for iteration, and basic data manipulation within PL/SQL blocks.',
                sections: {
                    inLab: {
                        title: 'In Lab',
                        questions: [
                            {
                                question: "Write a PL/SQL block to find the largest of two numbers using if....else.",
                                code: `DECLARE
    num1 NUMBER := 25;
    num2 NUMBER := 50;
BEGIN
    IF num1 > num2 THEN
        DBMS_OUTPUT.PUT_LINE('The largest number is: ' || num1);
    ELSE
        DBMS_OUTPUT.PUT_LINE('The largest number is: ' || num2);
    END IF;
END;
/`
                            },
                            {
                                question: "Write a PL/SQL block to calculate sum, product, square root and cube root of a given input.",
                                code: `DECLARE
    n NUMBER := 16;
    sum_val NUMBER;
    prod_val NUMBER;
    sqrt_val NUMBER;
    cbrt_val NUMBER;
BEGIN
    sum_val := n + 10;
    prod_val := n * 10;
    sqrt_val := SQRT(n);
    cbrt_val := POWER(n, 1/3);
    DBMS_OUTPUT.PUT_LINE('Number: ' || n);
    DBMS_OUTPUT.PUT_LINE('Sum with 10: ' || sum_val);
    DBMS_OUTPUT.PUT_LINE('Product with 10: ' || prod_val);
    DBMS_OUTPUT.PUT_LINE('Square Root: ' || sqrt_val);
    DBMS_OUTPUT.PUT_LINE('Cube Root: ' || cbrt_val);
END;
/`
                            },
                            {
                                question: "Write a PL/SQL block to print odd numbers from 1...30 using basic loop.",
                                code: `DECLARE
    i NUMBER := 1;
BEGIN
    LOOP
        EXIT WHEN i > 30;
        IF MOD(i, 2) != 0 THEN
            DBMS_OUTPUT.PUT_LINE(i);
        END IF;
        i := i + 1;
    END LOOP;
END;
/`
                            },
                            {
                                question: "Write a PL/SQL program to fetch salary from EMPLOYEE table where Empno is 7782.",
                                code: `DECLARE
    v_salary EMPLOYEE.SAL%TYPE;
BEGIN
    SELECT SAL INTO v_salary
    FROM EMPLOYEE
    WHERE EMPNO = 7782;
    DBMS_OUTPUT.PUT_LINE('The salary of employee 7782 is: ' || v_salary);
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        DBMS_OUTPUT.PUT_LINE('Employee with Empno 7782 not found.');
END;
/`
                            }
                        ]
                    },
                    postLab: {
                        title: 'Post Lab',
                        questions: [
                            {
                                question: "Write a PL/SQL block to find the given number is palindrome or not using while loop.",
                                code: `DECLARE
    n NUMBER := 121;
    temp NUMBER;
    rev NUMBER := 0;
    rem NUMBER;
BEGIN
    temp := n;
    WHILE temp > 0
    LOOP
        rem := MOD(temp, 10);
        rev := (rev * 10) + rem;
        temp := TRUNC(temp / 10);
    END LOOP;
    IF n = rev THEN
        DBMS_OUTPUT.PUT_LINE(n || ' is a palindrome.');
    ELSE
        DBMS_OUTPUT.PUT_LINE(n || ' is not a palindrome.');
    END IF;
END;
/`
                            },
                            {
                                question: "Write a PL/SQL block to print 1...10 in reverse order using for loop.",
                                code: `BEGIN
    FOR i IN REVERSE 1..10 LOOP
        DBMS_OUTPUT.PUT_LINE(i);
    END LOOP;
END;
/`
                            },
                            {
                                question: "Write a PL/SQL program to update a Record in the DEPARTMENT table.",
                                code: `DECLARE
    v_deptno DEPARTMENT.DEPTNO%TYPE := 10;
    v_new_loc DEPARTMENT.LOC%TYPE := 'VIJAYAWADA';
BEGIN
    UPDATE DEPARTMENT
    SET LOC = v_new_loc
    WHERE DEPTNO = v_deptno;
    IF SQL%FOUND THEN
        DBMS_OUTPUT.PUT_LINE('Department ' || v_deptno || '''s location updated.');
    ELSE
        DBMS_OUTPUT.PUT_LINE('Department ' || v_deptno || ' not found.');
    END IF;
    COMMIT;
END;
/`
                            }
                        ]
                    }
                }
            },
            {
                id: 'lab7',
                title: 'Lab Session 07: PL/SQL Cursors and Exceptions',
                intro: 'Explore cursors for handling multi-row query results and exceptions for robust error handling. This section demonstrates explicit cursors with their attributes (%FOUND, %NOTFOUND, %ROWCOUNT) and handling predefined exceptions like NO_DATA_FOUND.',
                sections: {
                    inLab: {
                        title: 'In Lab',
                        questions: [
                            {
                                question: "Write a PL/SQL program to fetch employee name, salary from EMPLOYEE table for the given input. Raise an exception when no data found.",
                                code: `DECLARE
    v_empno EMPLOYEE.EMPNO%TYPE := &emp_no;
    v_ename EMPLOYEE.ENAME%TYPE;
    v_sal   EMPLOYEE.SAL%TYPE;
BEGIN
    SELECT ENAME, SAL INTO v_ename, v_sal
    FROM EMPLOYEE
    WHERE EMPNO = v_empno;
    DBMS_OUTPUT.PUT_LINE('Employee Name: ' || v_ename);
    DBMS_OUTPUT.PUT_LINE('Salary: ' || v_sal);
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        DBMS_OUTPUT.PUT_LINE('No employee found with EMPNO: ' || v_empno);
END;
/`
                            },
                            {
                                question: "Write a PL/SQL program to fetch all the data from a DEPARTMENT table and display it on the screen using %notfound attribute.",
                                code: `DECLARE
    CURSOR dept_cursor IS SELECT * FROM DEPARTMENT;
    dept_rec dept_cursor%ROWTYPE;
BEGIN
    OPEN dept_cursor;
    LOOP
        FETCH dept_cursor INTO dept_rec;
        EXIT WHEN dept_cursor%NOTFOUND;
        DBMS_OUTPUT.PUT_LINE('Dept No: ' || dept_rec.DEPTNO || ', Name: ' || dept_rec.DNAME);
    END LOOP;
    CLOSE dept_cursor;
END;
/`
                            },
                            {
                                question: "Write a PL/SQL program to display deptno, empno, ename from EMP table using %found attribute.",
                                code: `DECLARE
    CURSOR emp_cursor IS SELECT DEPTNO, EMPNO, ENAME FROM EMPLOYEE;
    v_deptno EMPLOYEE.DEPTNO%TYPE;
    v_empno  EMPLOYEE.EMPNO%TYPE;
    v_ename  EMPLOYEE.ENAME%TYPE;
BEGIN
    OPEN emp_cursor;
    FETCH emp_cursor INTO v_deptno, v_empno, v_ename;
    IF emp_cursor%FOUND THEN
      DBMS_OUTPUT.PUT_LINE('Dept No | Emp No | Ename');
      WHILE emp_cursor%FOUND LOOP
        DBMS_OUTPUT.PUT_LINE(v_deptno || ' | ' || v_empno || ' | ' || v_ename);
        FETCH emp_cursor INTO v_deptno, v_empno, v_ename;
      END LOOP;
    END IF;
    CLOSE emp_cursor;
END;
/`
                            },
                            {
                                question: "Write a PL/SQL program to find the number of records of EMP Table using %rowcount.",
                                code: `DECLARE
    CURSOR emp_cursor IS SELECT ENAME FROM EMPLOYEE;
    v_ename EMPLOYEE.ENAME%TYPE;
BEGIN
    OPEN emp_cursor;
    LOOP
        FETCH emp_cursor INTO v_ename;
        EXIT WHEN emp_cursor%NOTFOUND;
    END LOOP;
    DBMS_OUTPUT.PUT_LINE('Total employees: ' || emp_cursor%ROWCOUNT);
    CLOSE emp_cursor;
END;
/`
                            }
                        ]
                    },
                    postLab: {
                        title: 'Post Lab',
                        questions: [
                            {
                                question: "Write a PL/SQL program to list the department numbers, Total salary, Maximum salary, Average salary and the number of employees in each Department. If the employee does not exist then display the message ‘Employee doesn’t exist’.",
                                code: `DECLARE
    CURSOR dept_stats_cursor IS
        SELECT d.DEPTNO, NVL(SUM(e.SAL),0) AS TOTAL_SALARY, COUNT(e.EMPNO) AS NUM_EMPLOYEES
        FROM DEPARTMENT d LEFT JOIN EMPLOYEE e ON d.DEPTNO = e.DEPTNO
        GROUP BY d.DEPTNO ORDER BY d.DEPTNO;
BEGIN
    FOR rec IN dept_stats_cursor LOOP
        IF rec.NUM_EMPLOYEES = 0 THEN
            DBMS_OUTPUT.PUT_LINE('Department ' || rec.DEPTNO || ': Employee doesn''t exist.');
        ELSE
            DBMS_OUTPUT.PUT_LINE('Dept: ' || rec.DEPTNO || ', Total Sal: ' || rec.TOTAL_SALARY);
        END IF;
    END LOOP;
END;
/`
                            },
                            {
                                question: 'Write a PL/SQL program to check whether the cursor is opened or not. If the cursor is opened display "Cursor already opened" otherwise open the cursor and Display the message "Just Opened the Cursor".',
                                code: `DECLARE
    CURSOR emp_cursor IS SELECT ENAME FROM EMPLOYEE WHERE DEPTNO = 10;
BEGIN
    IF emp_cursor%ISOPEN THEN
        DBMS_OUTPUT.PUT_LINE('Cursor already opened');
    ELSE
        OPEN emp_cursor;
        DBMS_OUTPUT.PUT_LINE('Just Opened the Cursor');
    END IF;
    IF emp_cursor%ISOPEN THEN
        CLOSE emp_cursor;
    END IF;
END;
/`
                            }
                        ]
                    }
                }
            },
            {
                id: 'lab8',
                title: 'Lab Session 08: PL/SQL Named Blocks',
                intro: 'Learn to create reusable code modules with named blocks: Procedures and Functions. This section covers creating stored procedures with IN/OUT parameters and functions that return values, promoting modular and maintainable code.',
                sections: {
                    inLab: {
                        title: 'In Lab',
                        questions: [
                            {
                                question: "Write a PL/SQL block to compute the factorial of a given number using stored procedure.",
                                code: `CREATE OR REPLACE PROCEDURE find_factorial (p_num IN NUMBER, p_fact OUT NUMBER)
IS
BEGIN
    IF p_num < 0 THEN p_fact := NULL;
    ELSIF p_num = 0 THEN p_fact := 1;
    ELSE
        p_fact := 1;
        FOR i IN 1..p_num LOOP p_fact := p_fact * i; END LOOP;
    END IF;
END;
/

-- Block to execute the procedure
DECLARE
    n NUMBER := 5;
    factorial NUMBER;
BEGIN
    find_factorial(n, factorial);
    DBMS_OUTPUT.PUT_LINE('Factorial of ' || n || ' is ' || factorial);
END;
/`
                            },
                            {
                                question: "Write a PL/SQL Procedure to display Ename, Salary when user inputs Empno Using in/out parameters.",
                                code: `CREATE OR REPLACE PROCEDURE get_emp_details (p_empno IN EMPLOYEE.EMPNO%TYPE, p_ename OUT EMPLOYEE.ENAME%TYPE, p_sal OUT EMPLOYEE.SAL%TYPE)
IS
BEGIN
    SELECT ENAME, SAL INTO p_ename, p_sal FROM EMPLOYEE WHERE EMPNO = p_empno;
EXCEPTION
    WHEN NO_DATA_FOUND THEN p_ename := NULL; p_sal := NULL;
END;
/

-- Block to execute the procedure
DECLARE
    v_empno EMPLOYEE.EMPNO%TYPE := 7839;
    v_ename EMPLOYEE.ENAME%TYPE;
    v_sal   EMPLOYEE.SAL%TYPE;
BEGIN
    get_emp_details(v_empno, v_ename, v_sal);
    IF v_ename IS NOT NULL THEN
        DBMS_OUTPUT.PUT_LINE('Name: ' || v_ename || ', Salary: ' || v_sal);
    ELSE
        DBMS_OUTPUT.PUT_LINE('Employee not found.');
    END IF;
END;
/`
                            },
                            {
                                question: "Write a PL/SQL Function to check the validity of Empno from the EMP table.",
                                code: `CREATE OR REPLACE FUNCTION is_emp_valid (p_empno IN EMPLOYEE.EMPNO%TYPE) RETURN BOOLEAN
IS
    v_count NUMBER;
BEGIN
    SELECT COUNT(*) INTO v_count FROM EMPLOYEE WHERE EMPNO = p_empno;
    RETURN (v_count > 0);
END;
/

-- Block to execute the function
DECLARE
    v_empno EMPLOYEE.EMPNO%TYPE := 7499;
BEGIN
    IF is_emp_valid(v_empno) THEN
        DBMS_OUTPUT.PUT_LINE('Employee ' || v_empno || ' is valid.');
    ELSE
        DBMS_OUTPUT.PUT_LINE('Employee ' || v_empno || ' is invalid.');
    END IF;
END;
/`
                            }
                        ]
                    },
                    postLab: {
                        title: 'Post Lab',
                        questions: [
                            {
                                question: "Write a PL/SQL Procedure to update Salary of EMP table using Empno as in parameter.",
                                code: `CREATE OR REPLACE PROCEDURE update_emp_salary (p_empno IN EMPLOYEE.EMPNO%TYPE, p_new_sal IN EMPLOYEE.SAL%TYPE)
IS
BEGIN
    UPDATE EMPLOYEE SET SAL = p_new_sal WHERE EMPNO = p_empno;
    IF SQL%ROWCOUNT = 0 THEN
        DBMS_OUTPUT.PUT_LINE('Employee ' || p_empno || ' not found.');
    ELSE
        DBMS_OUTPUT.PUT_LINE('Salary updated for employee ' || p_empno);
        COMMIT;
    END IF;
END;
/

-- Block to execute the procedure
BEGIN
    update_emp_salary(7369, 20000);
END;
/`
                            },
                            {
                                question: "Write PL/SQL Function that returns Deptno when user inputs Dname.",
                                code: `CREATE OR REPLACE FUNCTION get_deptno_by_dname (p_dname IN DEPARTMENT.DNAME%TYPE) RETURN DEPARTMENT.DEPTNO%TYPE
IS
    v_deptno DEPARTMENT.DEPTNO%TYPE;
BEGIN
    SELECT DEPTNO INTO v_deptno FROM DEPARTMENT WHERE DNAME = UPPER(p_dname);
    RETURN v_deptno;
EXCEPTION
    WHEN NO_DATA_FOUND THEN RETURN NULL;
END;
/

-- Block to execute the function
DECLARE
    v_dept_name DEPARTMENT.DNAME%TYPE := 'SALES';
    v_dept_number DEPARTMENT.DEPTNO%TYPE;
BEGIN
    v_dept_number := get_deptno_by_dname(v_dept_name);
    IF v_dept_number IS NOT NULL THEN
        DBMS_OUTPUT.PUT_LINE('Dept number for ' || v_dept_name || ' is ' || v_dept_number);
    ELSE
        DBMS_OUTPUT.PUT_LINE('Department not found.');
    END IF;
END;
/`
                            }
                        ]
                    }
                }
            },
            {
                id: 'lab9',
                title: 'Lab Session 09: PL/SQL Packages & Triggers',
                intro: 'Master advanced PL/SQL concepts: Packages for grouping related procedures and functions, and Triggers for automating actions based on database events. These examples show how to build modular libraries with packages and enforce business rules with triggers.',
                sections: {
                    inLab: {
                        title: 'In Lab',
                        questions: [
                            {
                                question: "Create a Package Math_lib with the functions add(), sub(), mul(), and div(). Accepts two numbers and return the result.",
                                code: `-- Package Specification
CREATE OR REPLACE PACKAGE Math_lib AS
    FUNCTION add(a NUMBER, b NUMBER) RETURN NUMBER;
    FUNCTION sub(a NUMBER, b NUMBER) RETURN NUMBER;
    FUNCTION mul(a NUMBER, b NUMBER) RETURN NUMBER;
    FUNCTION div(a NUMBER, b NUMBER) RETURN NUMBER;
END Math_lib;
/

-- Package Body
CREATE OR REPLACE PACKAGE BODY Math_lib AS
    FUNCTION add(a NUMBER, b NUMBER) RETURN NUMBER IS BEGIN RETURN a + b; END add;
    FUNCTION sub(a NUMBER, b NUMBER) RETURN NUMBER IS BEGIN RETURN a - b; END sub;
    FUNCTION mul(a NUMBER, b NUMBER) RETURN NUMBER IS BEGIN RETURN a * b; END mul;
    FUNCTION div(a NUMBER, b NUMBER) RETURN NUMBER IS
    BEGIN
        IF b = 0 THEN RETURN NULL; ELSE RETURN a / b; END IF;
    END div;
END Math_lib;
/

-- Block to use the package
DECLARE
    x NUMBER := 20;
    y NUMBER := 10;
BEGIN
    DBMS_OUTPUT.PUT_LINE(x || ' + ' || y || ' = ' || Math_lib.add(x, y));
    DBMS_OUTPUT.PUT_LINE(x || ' - ' || y || ' = ' || Math_lib.sub(x, y));
    DBMS_OUTPUT.PUT_LINE(x || ' * ' || y || ' = ' || Math_lib.mul(x, y));
    DBMS_OUTPUT.PUT_LINE(x || ' / ' || y || ' = ' || Math_lib.div(x, y));
END;
/`
                            },
                            {
                                question: "Write a Trigger that is fired before the DML statement's execution on the EMP Table. The trigger checks the day based on SYSDATE. If the day is Sunday, trigger does not allow the DML statement's execution and raises an exception.",
                                code: `CREATE OR REPLACE TRIGGER restrict_emp_dml_on_sunday
BEFORE INSERT OR UPDATE OR DELETE ON EMPLOYEE
BEGIN
    IF TO_CHAR(SYSDATE, 'DY', 'NLS_DATE_LANGUAGE=AMERICAN') = 'SUN' THEN
        RAISE_APPLICATION_ERROR(-20001, 'DML on EMPLOYEE table not allowed on Sunday.');
    END IF;
END;
/

-- To test the trigger, try running this on a Sunday:
-- INSERT INTO EMPLOYEE (EMPNO, ENAME, JOB, DEPTNO) VALUES (9999, 'TEST', 'CLERK', 10);`
                            }
                        ]
                    },
                    postLab: {
                        title: 'Post Lab',
                        questions: [
                            {
                                question: "Create a package to perform insert and delete operations on EMP table.",
                                code: `-- Package Specification
CREATE OR REPLACE PACKAGE emp_manager AS
    PROCEDURE add_employee(
        p_empno   IN EMPLOYEE.EMPNO%TYPE,
        p_ename   IN EMPLOYEE.ENAME%TYPE,
        p_job     IN EMPLOYEE.JOB%TYPE,
        p_deptno  IN EMPLOYEE.DEPTNO%TYPE
    );
    PROCEDURE remove_employee(p_empno IN EMPLOYEE.EMPNO%TYPE);
END emp_manager;
/

-- Package Body
CREATE OR REPLACE PACKAGE BODY emp_manager AS
    PROCEDURE add_employee(
        p_empno   IN EMPLOYEE.EMPNO%TYPE,
        p_ename   IN EMPLOYEE.ENAME%TYPE,
        p_job     IN EMPLOYEE.JOB%TYPE,
        p_deptno  IN EMPLOYEE.DEPTNO%TYPE
    ) IS
    BEGIN
        INSERT INTO EMPLOYEE (EMPNO, ENAME, JOB, DEPTNO, HIREDATE, SAL) 
        VALUES (p_empno, p_ename, p_job, p_deptno, SYSDATE, 30000);
        DBMS_OUTPUT.PUT_LINE('Employee added.');
        COMMIT;
    END add_employee;

    PROCEDURE remove_employee(p_empno IN EMPLOYEE.EMPNO%TYPE) IS
    BEGIN
        DELETE FROM EMPLOYEE WHERE EMPNO = p_empno;
        DBMS_OUTPUT.PUT_LINE('Employee removed.');
        COMMIT;
    END remove_employee;
END emp_manager;
/

-- Blocks to use the package
BEGIN
    -- Add a new employee
    emp_manager.add_employee(8001, 'GITA', 'CLERK', 20);
END;
/

BEGIN
    -- Remove an employee
    emp_manager.remove_employee(8001);
END;
/`
                            },
                            {
                                question: "Write a Trigger that is fired after an INSERT statement is executed For the DEPT Table. The trigger writes the new department's Id and System date in a table called TRACKING.",
                                code: `-- First, create the TRACKING table
CREATE TABLE TRACKING (
    DEPT_ID NUMBER(4),
    ACTION_DATE DATE,
    DESCRIPTION VARCHAR2(100)
);

-- Now, create the trigger
CREATE OR REPLACE TRIGGER track_dept_inserts
AFTER INSERT ON DEPARTMENT
FOR EACH ROW
BEGIN
    INSERT INTO TRACKING (DEPT_ID, ACTION_DATE, DESCRIPTION)
    VALUES (:NEW.DEPTNO, SYSDATE, 'New department added: ' || :NEW.DNAME);
END;
/

-- To test the trigger, run this INSERT statement
INSERT INTO DEPARTMENT (DEPTNO, DNAME, LOC) VALUES (50, 'HR', 'PUNE');
COMMIT;

-- Check the TRACKING table to see the result
-- SELECT * FROM TRACKING;`
                            }
                        ]
                    }
                }
            }
        ];

        const sidebarNav = document.getElementById('sidebar-nav');
        const mainTitle = document.getElementById('main-title');
        const mainIntro = document.getElementById('main-intro');
        const contentArea = document.getElementById('content-area');
        const searchBox = document.getElementById('search-box');
        const noResults = document.getElementById('no-results');

        function createQuestionCard(q) {
            const card = document.createElement('div');
            card.className = 'card bg-white rounded-lg shadow-md mb-6 border border-slate-200';
            
            const questionText = q.question || q.title;
            const searchableContent = (questionText + (q.code || '') + (q.content || '')).toLowerCase();
            card.setAttribute('data-search-content', searchableContent);

            const questionHeader = document.createElement('h4');
            questionHeader.className = 'font-semibold text-lg p-4 border-b border-slate-200';
            questionHeader.textContent = questionText;
            card.appendChild(questionHeader);
            
            const contentWrapper = document.createElement('div');
            
            if (q.type === 'er-design') {
                contentWrapper.className = 'p-4 er-design-card';
                contentWrapper.innerHTML = q.content;
            } else {
                contentWrapper.className = 'p-4 bg-slate-50 relative';
                const pre = document.createElement('pre');
                pre.className = 'text-sm text-slate-700 overflow-x-auto p-2';
                const code = document.createElement('code');
                code.textContent = q.code;
                pre.appendChild(code);
                contentWrapper.appendChild(pre);

                const copyBtn = document.createElement('button');
                copyBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg> <span>Copy</span>`;
                copyBtn.className = 'copy-btn-feedback absolute top-2 right-2 bg-slate-200 hover:bg-teal-500 hover:text-white text-slate-600 text-xs font-semibold py-1 px-2 rounded-md flex items-center gap-1';
                
                copyBtn.onclick = () => {
                    const textToCopy = q.code;
                    const tempTextArea = document.createElement('textarea');
                    tempTextArea.value = textToCopy;
                    document.body.appendChild(tempTextArea);
                    tempTextArea.select();
                    try {
                        document.execCommand('copy');
                        copyBtn.innerHTML = `<span>Copied!</span>`;
                        copyBtn.classList.add('bg-green-500', 'text-white');
                        setTimeout(() => {
                            copyBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg> <span>Copy</span>`;
                            copyBtn.classList.remove('bg-green-500', 'text-white');
                        }, 2000);
                    } catch (err) {
                        console.error('Failed to copy text: ', err);
                    }
                    document.body.removeChild(tempTextArea);
                };
                contentWrapper.appendChild(copyBtn);
            }
            
            card.appendChild(contentWrapper);
            return card;
        }

        function renderSession(session) {
            mainTitle.textContent = session.title;
            mainIntro.textContent = session.intro;
            contentArea.innerHTML = '';

            Object.values(session.sections).forEach(section => {
                const sectionWrapper = document.createElement('div');
                sectionWrapper.className = 'mb-8';

                const sectionTitle = document.createElement('h3');
                sectionTitle.className = 'text-2xl font-bold mb-4 pb-2 border-b-2 border-teal-500';
                sectionTitle.textContent = section.title;
                sectionWrapper.appendChild(sectionTitle);
                
                section.questions.forEach(q => {
                    sectionWrapper.appendChild(createQuestionCard(q));
                });

                contentArea.appendChild(sectionWrapper);
            });
            handleSearch(); // Apply search filter on new content
        }

        function setActiveLink(labId) {
            document.querySelectorAll('.sidebar-link').forEach(link => {
                link.classList.remove('active');
                if (link.dataset.labid === labId) {
                    link.classList.add('active');
                }
            });
        }
        
        function handleSearch() {
            const searchTerm = searchBox.value.toLowerCase();
            const allCards = document.querySelectorAll('.card');
            let visibleCount = 0;
            
            allCards.forEach(card => {
                const content = card.dataset.searchContent;
                if (content.includes(searchTerm)) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            noResults.style.display = visibleCount === 0 ? 'block' : 'none';
        }

        function init() {
            dbmsLabData.forEach(lab => {
                const link = document.createElement('a');
                link.href = `#${lab.id}`;
                link.textContent = lab.title.match(/Lab Session \d+/)[0];
                link.className = 'block py-2 px-4 rounded-md sidebar-link';
                link.dataset.labid = lab.id;

                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const currentLab = dbmsLabData.find(l => l.id === lab.id);
                    renderSession(currentLab);
                    setActiveLink(lab.id);
                    history.pushState({labId: lab.id}, '', `#${lab.id}`);
                });

                sidebarNav.appendChild(link);
            });

            const initialLabId = window.location.hash.substring(1) || dbmsLabData[0].id;
            const initialLab = dbmsLabData.find(lab => lab.id === initialLabId) || dbmsLabData[0];
            
            renderSession(initialLab);
            setActiveLink(initialLab.id);

            searchBox.addEventListener('input', handleSearch);
        }

        window.addEventListener('popstate', (event) => {
            const labId = (event.state && event.state.labId) || window.location.hash.substring(1) || dbmsLabData[0].id;
            const labData = dbmsLabData.find(lab => lab.id === labId) || dbmsLabData[0];
            renderSession(labData);
            setActiveLink(labId);
        });

        init();
    </script>
</body>
</html>